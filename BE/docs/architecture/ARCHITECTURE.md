# ì•„í‚¤í…ì²˜ ë¬¸ì„œ

> **ì‘ì„±ì¼**: 2025.11.26  
> **ì‘ì„±ì**: ê¹€ë™ì–¸  
> **ë²„ì „**: 1.0.0

---

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ìˆ  ìŠ¤íƒ](#1-ê¸°ìˆ -ìŠ¤íƒ)
2. [ì•„í‚¤í…ì²˜ íŒ¨í„´](#2-ì•„í‚¤í…ì²˜-íŒ¨í„´)
3. [ëª¨ë“ˆ êµ¬ì¡°](#3-ëª¨ë“ˆ-êµ¬ì¡°)
4. [ì‘ë‹µ í˜•ì‹ í‘œì¤€í™”](#4-ì‘ë‹µ-í˜•ì‹-í‘œì¤€í™”)
5. [ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • ë°°ê²½](#5-ê¸°ìˆ ì -ì˜ì‚¬ê²°ì •-ë°°ê²½)

---

## 1. ê¸°ìˆ  ìŠ¤íƒ

### 1.1 Backend Framework

#### **NestJS v11.0.1**
- TypeScript ê¸°ë°˜ í”„ë¡œê·¸ë ˆì‹œë¸Œ Node.js í”„ë ˆì„ì›Œí¬
- ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¡œ í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- Dependency Injectionì„ í†µí•œ ëŠìŠ¨í•œ ê²°í•©
- ê°•ë ¥í•œ íƒ€ì… ì•ˆì •ì„±

### 1.2 Language & Runtime

#### **TypeScript v5.7**
- ì •ì  íƒ€ì… ì‹œìŠ¤í…œìœ¼ë¡œ ê°œë°œ ìƒì‚°ì„± ë° ì½”ë“œ í’ˆì§ˆ í–¥ìƒ
- ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ê²€ì¶œ
- IDE ìë™ì™„ì„± ë° ë¦¬íŒ©í† ë§ ì§€ì›

#### **Node.js**
- ê³ ì„±ëŠ¥ ë¹„ë™ê¸° I/O
- ë‹¨ì¼ ì–¸ì–´ ìŠ¤íƒ (í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ)
- í’ë¶€í•œ npm ìƒíƒœê³„

### 1.3 Database

#### **PostgreSQL 14+**
- ê°•ë ¥í•œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **JSONB íƒ€ì…**: ìœ ì—°í•œ ë©”íƒ€ë°ì´í„° ì €ì¥
- **UUID ì§€ì›**: ë¶„ì‚° ì‹œìŠ¤í…œ ëŒ€ì‘
- **pgvector í™•ì¥ ê³„íš**: í–¥í›„ ë²¡í„° ê²€ìƒ‰ ì§€ì›

### 1.4 ORM

#### **TypeORM v0.3.27**
- TypeScript/JavaScript ORM
- Entity ê¸°ë°˜ ë°ì´í„° ëª¨ë¸ë§
- ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬
- Query Builderë¥¼ í†µí•œ ë³µì¡í•œ ì¿¼ë¦¬ ì‘ì„±
- Active Record / Data Mapper íŒ¨í„´ ì§€ì›

### 1.5 Validation & Transformation

#### **class-validator**
- ë°ì½”ë ˆì´í„° ê¸°ë°˜ ê²€ì¦
- ì»¤ìŠ¤í…€ ê²€ì¦ ê·œì¹™ ì‘ì„± ê°€ëŠ¥
- ìë™ ì—ëŸ¬ ë©”ì‹œì§€ ìƒì„±

#### **class-transformer**
- ê°ì²´ ë³€í™˜ ë° ì§ë ¬í™”
- DTO ìë™ ë³€í™˜
- íƒ€ì… ì•ˆì •ì„± ë³´ì¥

### 1.6 API Documentation

#### **Swagger (OpenAPI)**
- ìë™ API ë¬¸ì„œ ìƒì„±
- ë°ì½”ë ˆì´í„° ê¸°ë°˜ ë¬¸ì„œí™”
- ì¸í„°ë™í‹°ë¸Œ API í…ŒìŠ¤íŠ¸ UI

### 1.7 Testing

#### **Playwright**
- E2E í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
- API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸

### 1.8 Code Quality

#### **ESLint**
- ì½”ë“œ í’ˆì§ˆ ë° ìŠ¤íƒ€ì¼ ê²€ì‚¬
- TypeScript ê·œì¹™ ì ìš©
- ì»¤ìŠ¤í…€ ê·œì¹™ ì„¤ì •

#### **Prettier**
- ìë™ ì½”ë“œ í¬ë§¤íŒ…
- íŒ€ ì „ì²´ ì¼ê´€ëœ ì½”ë“œ ìŠ¤íƒ€ì¼

---

## 2. ì•„í‚¤í…ì²˜ íŒ¨í„´

### 2.1 ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ (Layered Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer              â”‚
â”‚                                         â”‚
â”‚  - Controllers: HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬      â”‚
â”‚  - DTOs: ë°ì´í„° ì „ì†¡ ê°ì²´                â”‚
â”‚  - Decorators: ë©”íƒ€ë°ì´í„° ì •ì˜           â”‚
â”‚  - Swagger: API ë¬¸ì„œí™”                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Business Logic Layer            â”‚
â”‚                                         â”‚
â”‚  - Services: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„          â”‚
â”‚  - Guards: ì¸ì¦/ì¸ê°€ ì²˜ë¦¬               â”‚
â”‚  - Interceptors: ìš”ì²­/ì‘ë‹µ ë³€í™˜         â”‚
â”‚  - Pipes: ë°ì´í„° ê²€ì¦ ë° ë³€í™˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data Access Layer               â”‚
â”‚                                         â”‚
â”‚  - Repositories: ë°ì´í„° ì ‘ê·¼ ì¶”ìƒí™”      â”‚
â”‚  - Entities: ë°ì´í„° ëª¨ë¸                â”‚
â”‚  - TypeORM: ORM ê³„ì¸µ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Database Layer               â”‚
â”‚                                         â”‚
â”‚  - PostgreSQL: ë°ì´í„° ì €ì¥ì†Œ            â”‚
â”‚  - Indexes: ì„±ëŠ¥ ìµœì í™”                 â”‚
â”‚  - Constraints: ë°ì´í„° ë¬´ê²°ì„±           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ì˜ì¡´ì„± ì£¼ì… (Dependency Injection)

```typescript
// ì˜ˆì‹œ: Service ì˜ì¡´ì„± ì£¼ì…
@Injectable()
export class PlanService {
  constructor(
    @InjectRepository(Plan)
    private planRepository: Repository<Plan>,
    @InjectRepository(PlanItem)
    private planItemRepository: Repository<PlanItem>,
    private aiService: AiService,
    private vendorService: VendorService,
  ) {}

  async createAiPlan(userId: string): Promise<Plan> {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  }
}
```

**ì¥ì :**
- ëŠìŠ¨í•œ ê²°í•© (Loose Coupling)
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (Mock ê°ì²´ ì£¼ì…)
- ì½”ë“œ ì¬ì‚¬ìš©ì„± í–¥ìƒ

### 2.3 ëª¨ë“ˆ ê¸°ë°˜ êµ¬ì¡°

```
AppModule (Root)
  â”œâ”€â”€ ConfigModule (ì „ì—­)
  â”œâ”€â”€ TypeOrmModule (ì „ì—­)
  â”œâ”€â”€ HealthModule
  â”œâ”€â”€ AuthModule (ì˜ˆì •)
  â”œâ”€â”€ UsersModule (ì˜ˆì •)
  â”œâ”€â”€ VendorsModule (ì˜ˆì •)
  â”œâ”€â”€ PlansModule (ì˜ˆì •)
  â”œâ”€â”€ ReservationsModule (ì˜ˆì •)
  â””â”€â”€ AiModule (ì˜ˆì •)
```

**ëª¨ë“ˆì˜ ì—­í• :**
- ê¸°ëŠ¥ë³„ ìº¡ìŠí™”
- ë…ë¦½ì ì¸ ê°œë°œ ë° í…ŒìŠ¤íŠ¸
- ì§€ì—° ë¡œë”© ê°€ëŠ¥

---

## 3. ëª¨ë“ˆ êµ¬ì¡°

### 3.1 í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ common/                    # ê³µí†µ ëª¨ë“ˆ (ì „ì—­ ì‚¬ìš©)
â”‚   â”œâ”€â”€ decorators/           # ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„°
â”‚   â”‚   â”œâ”€â”€ @CurrentUser()    # í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
â”‚   â”‚   â”œâ”€â”€ @Public()         # ì¸ì¦ ì œì™¸ ì—”ë“œí¬ì¸íŠ¸ í‘œì‹œ
â”‚   â”‚   â””â”€â”€ @ApiCommonResponse() # Swagger ê³µí†µ ì‘ë‹µ ë¬¸ì„œí™”
â”‚   â”‚
â”‚   â”œâ”€â”€ dto/                  # ê³µí†µ DTO
â”‚   â”‚   â””â”€â”€ PaginationDto     # í˜ì´ì§€ë„¤ì´ì…˜ íŒŒë¼ë¯¸í„°
â”‚   â”‚
â”‚   â”œâ”€â”€ filters/              # ì˜ˆì™¸ í•„í„°
â”‚   â”‚   â””â”€â”€ HttpExceptionFilter # ì „ì—­ ì—ëŸ¬ í•¸ë“¤ë§
â”‚   â”‚
â”‚   â”œâ”€â”€ guards/               # ì¸ì¦/ì¸ê°€ ê°€ë“œ
â”‚   â”‚   â”œâ”€â”€ JwtAuthGuard      # JWT ì¸ì¦
â”‚   â”‚   â””â”€â”€ RolesGuard        # ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´
â”‚   â”‚
â”‚   â”œâ”€â”€ interceptors/         # ì¸í„°ì…‰í„°
â”‚   â”‚   â””â”€â”€ TransformInterceptor # ì‘ë‹µ í˜•ì‹ í†µì¼
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/           # ê³µí†µ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ ApiResponse       # API ì‘ë‹µ íƒ€ì… ì •ì˜
â”‚   â”‚
â”‚   â””â”€â”€ types/                # ê³µí†µ íƒ€ì… ì •ì˜
â”‚
â”œâ”€â”€ entities/                 # ë°ì´í„°ë² ì´ìŠ¤ ì—”í‹°í‹° (14ê°œ)
â”‚   â”œâ”€â”€ user.entity.ts
â”‚   â”œâ”€â”€ vendor.entity.ts
â”‚   â”œâ”€â”€ plan.entity.ts
â”‚   â”œâ”€â”€ ai-resource.entity.ts
â”‚   â””â”€â”€ ... (ì´ 14ê°œ ì—”í‹°í‹°)
â”‚
â”œâ”€â”€ migrations/               # TypeORM ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ 1732600000000-InitialSchema.ts
â”‚
â”œâ”€â”€ modules/                  # ê¸°ëŠ¥ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ health/              # Health Check
â”‚   â”‚   â”œâ”€â”€ health.controller.ts
â”‚   â”‚   â”œâ”€â”€ health.service.ts
â”‚   â”‚   â”œâ”€â”€ health.module.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/ (ì˜ˆì •)         # ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ strategies/      # Passport ì „ëµ
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â””â”€â”€ auth.module.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ users/ (ì˜ˆì •)        # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ vendors/ (ì˜ˆì •)      # ì—…ì²´ ê´€ë¦¬
â”‚   â”œâ”€â”€ plans/ (ì˜ˆì •)        # í”Œëœ ê´€ë¦¬
â”‚   â”œâ”€â”€ reservations/ (ì˜ˆì •) # ì˜ˆì•½ ê´€ë¦¬
â”‚   â””â”€â”€ ai/ (ì˜ˆì •)           # AI ì¶”ì²œ
â”‚
â”œâ”€â”€ app.module.ts            # ë£¨íŠ¸ ëª¨ë“ˆ
â”œâ”€â”€ app.controller.ts
â”œâ”€â”€ app.service.ts
â”œâ”€â”€ main.ts                  # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â””â”€â”€ data-source.ts           # TypeORM ë°ì´í„° ì†ŒìŠ¤ ì„¤ì •
```

### 3.2 ëª¨ë“ˆ êµ¬ì¡° ì˜ˆì‹œ

```typescript
// modules/vendors/vendors.module.ts
@Module({
  imports: [
    TypeOrmModule.forFeature([
      Vendor,
      VendorVenueDetail,
      VendorImage,
      ServiceItem,
    ]),
  ],
  controllers: [VendorsController],
  providers: [VendorsService],
  exports: [VendorsService], // ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš© ê°€ëŠ¥
})
export class VendorsModule {}
```

### 3.3 ê³µí†µ ëª¨ë“ˆ êµ¬ì„± ìš”ì†Œ

#### 3.3.1 ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„°

```typescript
// @CurrentUser() - í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
@Get('profile')
async getProfile(@CurrentUser() user: User) {
  return user;
}

// @Public() - ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥
@Public()
@Get('vendors')
async getVendors() {
  return this.vendorsService.findAll();
}

// @ApiCommonResponse() - Swagger ë¬¸ì„œí™”
@ApiCommonResponse(VendorDto)
@Get(':id')
async getVendor(@Param('id') id: string) {
  return this.vendorsService.findOne(id);
}
```

#### 3.3.2 Exception Filter

```typescript
// ì „ì—­ ì—ëŸ¬ í•¸ë“¤ë§
@Catch()
export class HttpExceptionFilter implements ExceptionFilter {
  catch(exception: unknown, host: ArgumentsHost) {
    // ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ ë°˜í™˜
    return {
      success: false,
      error: {
        code: 'ERROR_CODE',
        message: 'Error message',
      },
      timestamp: new Date().toISOString(),
      path: request.url,
    };
  }
}
```

#### 3.3.3 Transform Interceptor

```typescript
// ì¼ê´€ëœ ì„±ê³µ ì‘ë‹µ í˜•ì‹
@Injectable()
export class TransformInterceptor<T> implements NestInterceptor<T, ApiResponse<T>> {
  intercept(context: ExecutionContext, next: CallHandler): Observable<ApiResponse<T>> {
    return next.handle().pipe(
      map(data => ({
        success: true,
        data,
        timestamp: new Date().toISOString(),
      })),
    );
  }
}
```

---

## 4. ì‘ë‹µ í˜•ì‹ í‘œì¤€í™”

### 4.1 ì„±ê³µ ì‘ë‹µ

```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "ê°•ë‚¨ ì›¨ë”©í™€",
    "category": "VENUE",
    "region": "ê°•ë‚¨êµ¬"
  },
  "timestamp": "2025-11-26T12:00:00.000Z"
}
```

### 4.2 ì—ëŸ¬ ì‘ë‹µ

```json
{
  "success": false,
  "error": {
    "code": "VENDOR_NOT_FOUND",
    "message": "ì—…ì²´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
    "details": {
      "vendorId": "invalid-uuid"
    }
  },
  "timestamp": "2025-11-26T12:00:00.000Z",
  "path": "/api/v1/vendors/invalid-uuid"
}
```

### 4.3 í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ

```json
{
  "success": true,
  "data": {
    "items": [
      { "id": "...", "name": "..." },
      { "id": "...", "name": "..." }
    ],
    "meta": {
      "page": 1,
      "limit": 20,
      "total": 150,
      "totalPages": 8
    }
  },
  "timestamp": "2025-11-26T12:00:00.000Z"
}
```

### 4.4 ì—ëŸ¬ ì½”ë“œ ì²´ê³„

| ë²”ìœ„ | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|
| 1000-1999 | ì¸ì¦/ì¸ê°€ | AUTH_INVALID_TOKEN, AUTH_EXPIRED |
| 2000-2999 | ì‚¬ìš©ì | USER_NOT_FOUND, USER_EMAIL_DUPLICATE |
| 3000-3999 | ì—…ì²´ | VENDOR_NOT_FOUND, VENDOR_INACTIVE |
| 4000-4999 | í”Œëœ | PLAN_NOT_FOUND, PLAN_ITEM_INVALID |
| 5000-5999 | ì˜ˆì•½ | RESERVATION_CONFLICT, RESERVATION_CANCELLED |
| 9000-9999 | ì‹œìŠ¤í…œ | INTERNAL_ERROR, DATABASE_ERROR |

---

## 5. ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • ë°°ê²½

### 5.1 ì™œ NestJSì¸ê°€?

#### 1. TypeScript ë„¤ì´í‹°ë¸Œ ì§€ì›
- **íƒ€ì… ì•ˆì •ì„±**: ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ë°©ì§€
- **ê°œë°œ ìƒì‚°ì„±**: IDE ìë™ì™„ì„±, ë¦¬íŒ©í† ë§ ì§€ì›
- **ì½”ë“œ í’ˆì§ˆ**: ëª…ì‹œì ì¸ íƒ€ì…ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ

#### 2. ëª¨ë“ˆí™” ì•„í‚¤í…ì²˜
- **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: ê¸°ëŠ¥ë³„ ëª¨ë“ˆë¡œ ëª…í™•íˆ ë¶„ë¦¬
- **ì¬ì‚¬ìš©ì„±**: ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥
- **íŒ€ í˜‘ì—…**: ëª¨ë“ˆë³„ë¡œ ë…ë¦½ì  ê°œë°œ ê°€ëŠ¥

#### 3. Dependency Injection
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: Mock ê°ì²´ ì£¼ì…ìœ¼ë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°„í¸
- **ëŠìŠ¨í•œ ê²°í•©**: ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì˜ì¡´ì„±
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ êµ¬í˜„ì²´ ì¶”ê°€ ìš©ì´

#### 4. í’ë¶€í•œ ìƒíƒœê³„
- **ê³µì‹ íŒ¨í‚¤ì§€**: TypeORM, Passport, Swagger ë“±
- **í™œë°œí•œ ì»¤ë®¤ë‹ˆí‹°**: ë¹ ë¥¸ ë¬¸ì œ í•´ê²°
- **ê²€ì¦ëœ ì•„í‚¤í…ì²˜**: ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ ì ìš© ì‚¬ë¡€ ë§ìŒ

### 5.2 ì™œ PostgreSQLì¸ê°€?

#### 1. JSONB íƒ€ì… ì§€ì›
- **ìœ ì—°ì„±**: NoSQLì˜ ì¥ì ì„ RDBì—ì„œ í™œìš©
- **ì„±ëŠ¥**: ë°”ì´ë„ˆë¦¬ í˜•íƒœë¡œ ì €ì¥ë˜ì–´ ë¹ ë¥¸ ê²€ìƒ‰
- **ì¸ë±ì‹±**: GIN ì¸ë±ìŠ¤ë¡œ JSON ë‚´ë¶€ í•„ë“œ ê²€ìƒ‰ ìµœì í™”

```sql
-- JSONB í™œìš© ì˜ˆì‹œ (ai_resource í…Œì´ë¸”)
SELECT * FROM ai_resource
WHERE metadata->>'region' = 'ê°•ë‚¨êµ¬'
AND (metadata->>'price_min')::int <= 1000000;
```

#### 2. pgvector í™•ì¥ ê°€ëŠ¥
- **í–¥í›„ ê³„íš**: ë²¡í„° ê²€ìƒ‰ ë„ì… ì‹œ DB ë³€ê²½ ë¶ˆí•„ìš”
- **ì„ë² ë”© ì €ì¥**: AI ëª¨ë¸ì˜ ì„ë² ë”© ë²¡í„° ì§ì ‘ ì €ì¥
- **ì‹œë§¨í‹± ê²€ìƒ‰**: ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ìœ¼ë¡œ ì¶”ì²œ ì •í™•ë„ í–¥ìƒ

```sql
-- pgvector ì‚¬ìš© ì˜ˆì‹œ (í–¥í›„)
CREATE EXTENSION vector;

ALTER TABLE ai_resource ADD COLUMN embedding vector(1536);

-- ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
SELECT * FROM ai_resource
ORDER BY embedding <=> '[0.1, 0.2, ...]'
LIMIT 10;
```

#### 3. ê°•ë ¥í•œ íŠ¸ëœì­ì…˜ ì§€ì›
- **ACID ë³´ì¥**: ë°ì´í„° ë¬´ê²°ì„± í™•ë³´
- **ê²©ë¦¬ ìˆ˜ì¤€**: Read Committed, Repeatable Read, Serializable
- **MVCC**: ë™ì‹œì„± ì œì–´ë¡œ ë†’ì€ ì²˜ë¦¬ëŸ‰

#### 4. ì„±ëŠ¥ ë° ì•ˆì •ì„±
- **ëŒ€ìš©ëŸ‰ ë°ì´í„°**: ìˆ˜ë°±ë§Œ í–‰ ì´ìƒ ì²˜ë¦¬ ê°€ëŠ¥
- **ê²€ì¦ëœ DBMS**: 30ë…„ ì´ìƒì˜ ì—­ì‚¬
- **ì—”í„°í”„ë¼ì´ì¦ˆê¸‰**: ê¸ˆìœµ, í†µì‹  ë“± ì£¼ìš” ì‚°ì—…ì—ì„œ ì‚¬ìš©

### 5.3 ì™œ TypeORMì¸ê°€?

#### 1. TypeScript ì™„ë²½ ì§€ì›
- ì—”í‹°í‹° ì •ì˜ê°€ TypeScript í´ë˜ìŠ¤
- íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- ë°ì½”ë ˆì´í„° ê¸°ë°˜ ë©”íƒ€ë°ì´í„°

#### 2. Active Record vs Data Mapper
- ë‘ ê°€ì§€ íŒ¨í„´ ëª¨ë‘ ì§€ì›
- í”„ë¡œì íŠ¸ íŠ¹ì„±ì— ë§ê²Œ ì„ íƒ ê°€ëŠ¥

#### 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬
- ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
- ë²„ì „ ê´€ë¦¬
- ë¡¤ë°± ì§€ì›

#### 4. Query Builder
- ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ íƒ€ì… ì•ˆì „í•˜ê²Œ ì‘ì„±
- SQL Injection ë°©ì§€
- ê°€ë…ì„± ë†’ì€ ì½”ë“œ

```typescript
// Query Builder ì˜ˆì‹œ
const vendors = await this.vendorRepository
  .createQueryBuilder('vendor')
  .leftJoinAndSelect('vendor.images', 'images')
  .leftJoinAndSelect('vendor.venue_detail', 'detail')
  .where('vendor.category = :category', { category: 'VENUE' })
  .andWhere('vendor.region = :region', { region: 'ê°•ë‚¨êµ¬' })
  .orderBy('vendor.total_score', 'DESC')
  .limit(20)
  .getMany();
```

---

## 6. ì„±ëŠ¥ ìµœì í™” ì „ëµ

### 6.1 ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

1. **ì¸ë±ìŠ¤ ì „ëµ**
   - ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„±
   - ë³µí•© ì¸ë±ìŠ¤ë¡œ ë‹¤ì¤‘ ì¡°ê±´ ì¿¼ë¦¬ ìµœì í™”
   - JSONB GIN ì¸ë±ìŠ¤

2. **ì¿¼ë¦¬ ìµœì í™”**
   - N+1 ë¬¸ì œ ë°©ì§€ (Eager Loading, Join)
   - í•„ìš”í•œ ì»¬ëŸ¼ë§Œ SELECT
   - Paginationìœ¼ë¡œ ëŒ€ëŸ‰ ë°ì´í„° ë¶€í•˜ ë°©ì§€

3. **ì—°ê²° í’€ë§**
   - TypeORM connection pooling
   - ìµœëŒ€ ì—°ê²° ìˆ˜ ì œí•œ

### 6.2 ìºì‹± ì „ëµ (í–¥í›„)

- **Redis ë„ì… ê³„íš**
  - ì—…ì²´ ì •ë³´ (TTL: 1ì‹œê°„)
  - AI ì¶”ì²œ ê²°ê³¼ (TTL: 10ë¶„)
  - ì •ì±… ì •ë³´ (TTL: 1ì¼)

### 6.3 API ì‘ë‹µ ìµœì í™”

- ì‘ë‹µ ë°ì´í„° ì••ì¶• (gzip)
- ë¶ˆí•„ìš”í•œ ë°ì´í„° ì œê±°
- ì¡°ê±´ë¶€ ìš”ì²­ (ETag, Last-Modified)

---

## 7. ë³´ì•ˆ ì „ëµ

### 7.1 ì¸ì¦ (Authentication)

- **JWT ê¸°ë°˜ ì¸ì¦**
  - Access Token (ìœ íš¨ê¸°ê°„: 1ì¼)
  - Refresh Token (ìœ íš¨ê¸°ê°„: 30ì¼, ì¶”í›„ êµ¬í˜„)

### 7.2 ì¸ê°€ (Authorization)

- **ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)**
  - USER, VENDOR, ADMIN ì—­í• 
  - @Roles() ë°ì½”ë ˆì´í„°ë¡œ ì—”ë“œí¬ì¸íŠ¸ë³„ ì œì–´

### 7.3 ë°ì´í„° ë³´ì•ˆ

- **SQL Injection ë°©ì§€**: TypeORM Parameterized Query
- **XSS ë°©ì§€**: ì…ë ¥ ë°ì´í„° ê²€ì¦ ë° ì´ìŠ¤ì¼€ì´í•‘
- **ë¹„ë°€ë²ˆí˜¸ í•´ì‹±**: bcrypt (salt rounds: 10)

### 7.4 API ë³´ì•ˆ

- **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- **Rate Limiting**: DDoS ë°©ì–´
- **Helmet**: HTTP í—¤ë” ë³´ì•ˆ ê°•í™”

---

## 8. ì°¸ê³  ë¬¸ì„œ

- **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„**: [../database/DATABASE.md](../database/DATABASE.md)
- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**: [../business/BUSINESS_LOGIC.md](../business/BUSINESS_LOGIC.md)
- **API ì„¤ê³„**: [../api/API_DESIGN.md](../api/API_DESIGN.md)
- **NestJS ê³µì‹ ë¬¸ì„œ**: https://docs.nestjs.com
- **TypeORM ê³µì‹ ë¬¸ì„œ**: https://typeorm.io

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025.11.26

